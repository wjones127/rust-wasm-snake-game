!function(t){function e(e){for(var n,r,o=e[0],s=e[1],c=0,a=[];c<o.length;c++)r=o[c],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&a.push(i[r][0]),i[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);for(u&&u(e);a.length;)a.shift()()}var n={},i={0:0};var r={};var o={2:function(){return{"./index_bg.js":{__wbg_new_a938277eeb06668d:function(){return n[1].exports.h()},__wbg_vector_new:function(t){return n[1].exports.m(t)},__wbg_push_2bfc5fcfa4d4389d:function(t,e){return n[1].exports.i(t,e)},__wbindgen_object_drop_ref:function(t){return n[1].exports.o(t)},__wbindgen_string_new:function(t,e){return n[1].exports.p(t,e)},__wbg_log_cc6b9ddc6ca5449d:function(t){return n[1].exports.g(t)},__wbg_self_1b7a39e3a92c949c:function(){return n[1].exports.l()},__wbg_require_604837428532a733:function(t,e){return n[1].exports.k(t,e)},__wbg_crypto_968f1772287e2df0:function(t){return n[1].exports.d(t)},__wbindgen_is_undefined:function(t){return n[1].exports.n(t)},__wbg_getRandomValues_a3d34b4fee3c2869:function(t){return n[1].exports.e(t)},__wbg_getRandomValues_f5e14ab7ac8e995d:function(t,e,i){return n[1].exports.f(t,e,i)},__wbg_randomFillSync_d5bd2d655fdf256a:function(t,e,i){return n[1].exports.j(t,e,i)},__wbindgen_throw:function(t,e){return n[1].exports.q(t,e)}}}}};function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var c=new Promise((function(e,r){n=i[t]=[e,r]}));e.push(n[2]=c);var a,h=document.createElement("script");h.charset="utf-8",h.timeout=120,s.nc&&h.setAttribute("nonce",s.nc),h.src=function(t){return s.p+""+({}[t]||t)+".js"}(t);var u=new Error;a=function(e){h.onerror=h.onload=null,clearTimeout(l);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",u.name="ChunkLoadError",u.type=r,u.request=o,n[1](u)}i[t]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:h})}),12e4);h.onerror=h.onload=a,document.head.appendChild(h)}return({1:[2]}[t]||[]).forEach((function(t){var n=r[t];if(n)e.push(n);else{var i,c=o[t](),a=fetch(s.p+""+{2:"05ceed99a57b1ab1df87"}[t]+".module.wasm");if(c instanceof Promise&&"function"==typeof WebAssembly.compileStreaming)i=Promise.all([WebAssembly.compileStreaming(a),c]).then((function(t){return WebAssembly.instantiate(t[0],t[1])}));else if("function"==typeof WebAssembly.instantiateStreaming)i=WebAssembly.instantiateStreaming(a,c);else{i=a.then((function(t){return t.arrayBuffer()})).then((function(t){return WebAssembly.instantiate(t,c)}))}e.push(r[t]=i.then((function(e){return s.w[t]=(e.instance||e).exports})))}})),Promise.all(e)},s.m=t,s.c=n,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s.oe=function(t){throw console.error(t),t},s.w={};var c=window.webpackJsonp=window.webpackJsonp||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var h=0;h<c.length;h++)e(c[h]);var u=a;s(s.s=0)}([function(t,e,n){"use strict";n.r(e);var i=17,r=17,o=.006,s=3,c=1,a=0,h=60;const u=t=>[...Array(t).keys()];class l{constructor(t,e,n=(()=>{})){this.gameWidth=t,this.gameHeight=e,this.container=document.getElementById("container"),this.onViewChange=n,this.setUp(),window.addEventListener("resize",()=>{const[t]=this.container.children;t&&this.container.removeChild(t),this.setUp(),this.onViewChange()})}setUp(){const{width:t,height:e}=this.container.getBoundingClientRect();this.unitOnScreen=Math.min(t/this.gameWidth,e/this.gameHeight),this.projectDictance=t=>t*this.unitOnScreen,this.projectPosition=t=>t.scale_by(this.unitOnScreen);const n=document.createElement("canvas");this.container.appendChild(n),this.context=n.getContext("2d"),n.setAttribute("width",this.projectDictance(this.gameWidth)),n.setAttribute("height",this.projectDictance(this.gameHeight))}render(t,e,n,i,r){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this.context.globalAlpha=.2,this.context.fillStyle="black",u(this.gameWidth).forEach(t=>{u(this.gameHeight).filter(e=>(t+e)%2==1).forEach(e=>{this.context.fillRect(this.projectDictance(t),this.projectDictance(e),this.projectDictance(1),this.projectDictance(1))})}),this.context.globalAlpha=1,this.context.font=this.unitOnScreen+"px serif",this.context.textAlign="center",this.context.textBaseline="middle";let o=this.projectPosition(t);this.context.fillText(e,o.x,o.y),this.context.lineWidth=this.unitOnScreen,this.context.strokeStyle="#3498db",this.context.beginPath(),n.map(this.projectPosition).forEach(({x:t,y:e})=>{this.context.lineTo(t,e)}),this.context.stroke(),document.getElementById("current-score").innerText=i,document.getElementById("high-score").innerHTML=r}}var d=()=>parseInt(localStorage.bestScore)||0,f=t=>localStorage.setItem("bestScore",t);n.e(1).then(n.bind(null,5)).then(t=>{let e=t.Game,n=t.Vector,u=t.Movement;const p={[u.UP]:[87,38],[u.DOWN]:[83,40],[u.LEFT]:[65,37],[u.RIGHT]:[68,39]};class m{constructor(t=(()=>{})){window.addEventListener("keydown",({which:t})=>{console.log(t),this.movement=Object.keys(p).find(e=>p[e].includes(t)),this.movement=parseInt(this.movement)}),window.addEventListener("keyup",({which:e})=>{this.movement=void 0,32===e&&t()})}}(new class{constructor(){this.restart(),this.view=new l(this.game.width,this.game.height,this.render.bind(this)),this.controller=new m(this.onStop.bind(this))}restart(){this.game=new e(i,r,o,s,new n(c,a)),this.lastUpdate=void 0,this.stopTime=void 0}onStop(){const t=Date.now();this.stopTime?(this.stopTime=void 0,this.lastUpdate=this.time+t-this.lastUpdate):this.stopTime=t}render(){this.view.render(this.game.food_position,this.game.food_char,this.game.get_snake(),this.game.score,d())}tick(){if(!this.stopTime){const t=Date.now();if(this.lastUpdate&&(this.game.process(t-this.lastUpdate,this.controller.movement),this.game.score>d()&&f(this.game.score),this.game.is_over()))return void this.restart();this.lastUpdate=t,this.render()}}run(){console.log("Running! ðŸš€"),setInterval(this.tick.bind(this),1e3/h)}}).run()}).catch(console.error)}]);